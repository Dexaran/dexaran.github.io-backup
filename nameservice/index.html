<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>DexNS browser</title>
  <link rel="canonical" href="https://github.com/Dexaran" />
  <meta name="description" content="Powered by Dexaran">
  <meta name="author" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Raleway:200,400,300,600" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="css/etherwallet-master.min.css">
  <script type="text/javascript" src="js/jquery-1.11.3.min.js"></script>
  <script type="text/javascript" src="js/etherwallet-static.min.js"></script>
  <script type="text/javascript" src="js/etherwallet-master.min.js"></script>
  <script type="text/javascript"> var abiArray = [{"constant":false,"inputs":[{"name":"_name","type":"string"}],"name":"registerName","outputs":[{"name":"ok","type":"bool"}],"payable":true,"type":"function"},{"constant":true,"inputs":[{"name":"_name","type":"string"}],"name":"valueOf","outputs":[{"name":"_value","type":"string"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"_name","type":"string"}],"name":"endblockOf","outputs":[{"name":"_endblock","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_name","type":"string"}],"name":"extendNameBindingTime","outputs":[],"payable":true,"type":"function"},{"constant":false,"inputs":[{"name":"_name","type":"string"},{"name":"_value","type":"string"}],"name":"updateName","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_name","type":"string"},{"name":"_addr","type":"address"},{"name":"_value","type":"string"}],"name":"updateName","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"debug","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_target","type":"address"},{"name":"_gas","type":"uint256"},{"name":"_data","type":"bytes"}],"name":"delegateCall","outputs":[],"payable":true,"type":"function"},{"constant":false,"inputs":[{"name":"_name","type":"string"},{"name":"_hide","type":"bool"}],"name":"hideNameOwner","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"_name","type":"string"}],"name":"name","outputs":[{"name":"hash","type":"bytes32"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"_name","type":"string"}],"name":"getName","outputs":[{"name":"_owner","type":"address"},{"name":"_associatedAddress","type":"address"},{"name":"_value","type":"string"},{"name":"_endblock","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"_name","type":"string"}],"name":"ownerOf","outputs":[{"name":"_owner","type":"address"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"dispose_ONLYDEBUG","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_newOwner","type":"address"}],"name":"changeOwner","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_name","type":"string"},{"name":"_newOwner","type":"address"}],"name":"changeNameOwner","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"namePrice","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_newOwningTime","type":"uint256"}],"name":"setOwningTime_ONLYDEBUG","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"owningTime","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"_name","type":"string"}],"name":"addressOf","outputs":[{"name":"_addr","type":"address"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_newNamePrice","type":"uint256"}],"name":"changeNamePrice_ONLYDEBUG","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_newOwner","type":"address"}],"name":"disableDebug_ONLYDEBUG","outputs":[],"payable":false,"type":"function"},{"inputs":[],"payable":false,"type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_price","type":"uint256"}],"name":"NamePriceChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_blocks","type":"uint256"}],"name":"OwningTimeChanged","type":"event"},{"anonymous":false,"inputs":[],"name":"DebugDisabled","type":"event"}]</script>

  <script type="text/javascript" src="web3.min.js"></script>

  <script type="text/javascript" src="js/source/01_global.js"></script>
  <script type="text/javascript" src="js/source/02_ajax.js"></script>
  <script type="text/javascript" src="js/source/03_transactions.js"></script>
  <script type="text/javascript" src="js/source/04_walletimport.js"></script>
  <script type="text/javascript" src="js/source/05_augur.js"></script>
  <script type="text/javascript" src="js/source/staticJS/01_ethereumjs-accounts.js"></script>
  <script type="text/javascript" src="js/source/staticJS/02_qrcode.min.js"></script>
  <script type="text/javascript" src="js/source/staticJS/03_ctr.js"></script>
  <script type="text/javascript" src="js/source/staticJS/03_sha3.js"></script>
  <script type="text/javascript" src="js/source/staticJS/03_zeropad.js"></script>
  <script type="text/javascript" src="js/source/staticJS/04_bootstrap_modal.js"></script>
  <script type="text/javascript" src="js/source/staticJS/05_pbkdf2-min.js"></script>
  <script type="text/javascript" src="js/source/staticJS/06_sha256.js"></script>
  <script type="text/javascript" src="js/source/staticJS/06_sha-pbkdf.js"></script>
  <script type="text/javascript" src="js/source/staticJS/07_scrypt.js"></script>
  <script type="text/javascript" src="js/source/staticJS/08_web3.js"></script>
  <script type="text/javascript">


      //var uri = 'https://api.myetherapi.com/rop';
    var uri = 'https://mewapi.epool.io';
    //var uri = 'https://api.gastracker.io/web3';
    var web3 = new Web3(new Web3.providers.HttpProvider(uri));
    var from = web3.eth.coinbase;
    var contractAddress = '0x0e2cec66618f7ca428b1fe01d0de779dbb0f7358';
    var contract = web3.eth.contract(abiArray).at(contractAddress);
    var clockingFunc;
    var Name1;


    window.onload = function() {

    }


    function dexRegName() {

      var askName = contract.getName($('#newnameregister').val());
      if(askName[0]!=0x0) {
        alert("ERROR: Name is already registered!");
      } else {
      $("#divregNameCosts").show();
    }
    }

    function dexRegNameSubmit() {

    var addressFrom = $("#accountAddress").html();
    var addressNonce = web3.eth.getTransactionCount(addressFrom);

    var nonce1 = padLeftEven(BNtoHex(new BigNumber(addressNonce)));
    var gasPrice1 = padLeftEven(BNtoHex(new BigNumber(0).plus(20000000000).toDigits(1))); 
    var gasLimit1 = padLeftEven(BNtoHex(new BigNumber(210000)));

    //var nameStringHex = web3.toHex('string').substring(2);

    var dexCallData = contract.registerName.getData($('#newnameregister').val());
     //  alert("1: " + dexCallData);


    var rawRegnameTx = {
      nonce: '0x'+nonce1,
      gasPrice: '0x'+gasPrice1,
      gasLimit: '0x'+gasLimit1,
      to: contractAddress,
      value: '0x0',
      data: dexCallData
    };

     //  alert("2: " + rawRegnameTx);


    var privateKey = new Buffer(PrivKey, 'hex');
    var txReg = new Tx(rawRegnameTx);

      // alert("3: " + txReg.data);

    txReg.sign(privateKey);

    var serializedRegTx = '0x' + txReg.serialize().toString('hex');
      var rdataReg = {
        raw: JSON.stringify(rawRegnameTx),
        signed: serializedRegTx
      }

      // alert("4: " + rdataReg.signed);


      web3.eth.sendRawTransaction(rdataReg.signed, function(err, result) {
        //alert(result);
        if(err) {
 $("#regnamestatus").html('<p class="text-center text-success"><strong> ERROR:  ' +err +'</strong></p>');
       }
        else {
          $("#regnamestatus").html('<p class="text-center text-success"><strong> Transaction submitted. TX ID:  </strong><a href="http://gastracker.io/tx/'+ result + '">'+ result + '</a></p>');
        }
      });
    }

    function dexGenTx() {

try{

    if (PrivKey.length != 64) throw "Invalid Private key, try again";
    if (!$.isNumeric($('#sendtxamount').val()) || $('#sendtxamount').val() <= 0) throw "Invalid amount, try again";
        var uri = 'https://mewapi.epool.io';
    //var uri = 'https://api.gastracker.io/web3';
    var web3 = new Web3(new Web3.providers.HttpProvider(uri));
        $("#tarawtx").val("");
        $("#tasignedtx").val("");
        $("#txsendstatus").html('')

    var toAddress = $('#sendtxaddress').val();
    var sendToName = contract.getName(toAddress);
    if (validateEtherAddress(toAddress)) {

      $("#tareceiver").val('You are sending: '+ $('#sendtxamount').val() +' Ether\nTo: '+ $('#sendtxaddress').val());
    } else {

     toAddress=sendToName[1];
     $("#tareceiver").val('You are sending: '+ $('#sendtxamount').val() +' Ether\nTo: "'+ $('#sendtxaddress').val() +'" \nAddress: '+ toAddress);
    }

    if (!validateEtherAddress(toAddress)) throw "Invalid to Address, try again";
    var addressFrom = $("#accountAddress").html();
    var addressNonce = web3.eth.getTransactionCount(addressFrom);

    var nonce = padLeftEven(BNtoHex(new BigNumber(addressNonce)));
    var tmpValue = String(toWei($('#sendtxamount').val(), 'ether'));
    var gasPrice = padLeftEven(BNtoHex(new BigNumber(0).plus(20000000000).toDigits(1))); 
    var gasLimit = padLeftEven(BNtoHex(new BigNumber(90000))); 
    var value = padLeftEven(BNtoHex(new BigNumber(tmpValue)));

    var rawTx = {
      nonce: '0x'+nonce,
      gasPrice: '0x'+gasPrice,
      gasLimit: '0x'+gasLimit,
      to: toAddress,
      value: '0x'+value,
      data: ''
    };
    var privateKey = new Buffer(PrivKey, 'hex');
    var tx = new Tx(rawTx);
    tx.sign(privateKey);
    var serializedTx = '0x' + tx.serialize().toString('hex');
      var rdata = {
        raw: JSON.stringify(rawTx),
        signed: serializedTx
      }


      


      $("#tarawtx").val(rdata.raw);
      $("#tasignedtx").val(rdata.signed);
      //$("#txsendstatus").html('<p class="text-center text-success"><strong> Transaction submitted. TX ID: ' + data + '</strong></p>');
      $("#divtransactionTAs").show();
      $("#divsendtranaction").show();
      
      $("#confirmAmount").html($('#sendtxamount').val());
      $("#confirmAddress").html(toAddress);

    /*  web3.eth.sendRawTransaction(rdata.signed, function(data) {
    if (data.error) {
      alert("Error occurred: " + data.msg);
    }
    alert(data.data);
    alert(data);
  }); */
}
   catch (err) {
    $("#txcreatestatus").html('<p class="text-center text-danger"><strong> ' + err + '</strong></p>').fadeIn(50).fadeOut(3000);
    $("#divtransactionTAs").hide();
    $("#divsendtranaction").hide();
  }
  }


    function dexSendTx() {
        web3.eth.sendRawTransaction($("#tasignedtx").val(), function(err, result) {
        $("#txsendstatus").html('<p class="text-center text-success"><strong> Transaction submitted. TX ID:  </strong><a href="http://gastracker.io/tx/'+ result + '">'+ result + '</a></p>');
      });
  }

    function dexGetBalance() {
    var uri = 'https://mewapi.epool.io';
    //var uri = 'https://api.gastracker.io/web3';
    var web3 = new Web3(new Web3.providers.HttpProvider(uri));
    var originalBalance = $("#accountAddress").html();
    web3.eth.getBalance(originalBalance, function(err, result){
                            document.getElementById('accountBalance').innerText = String(web3.fromWei(result, 'ether')) + ' ETC';
                    });
    }

    function onNameKeyUp() {

      var Name = document.getElementById('searchname').value;
        contract.getName(Name, function(error, result){
          if(!error)
              document.getElementById('ownerOfId').value = result[0];
              document.getElementById('addressOfId').value = result[1];
              document.getElementById('valueOfId').value = result[2];
              document.getElementById('endblockOfId').value = result[3];
          //else
              //console.error(error);
      });
      }

    function onAddressKeyUp() {
      //alert("executed!");
      Name1 = $('#sendtxaddress').val();


      clockingFunc = setInterval(function(){
        if(!validateEtherAddress(Name1)){
        contract.getName(Name1, function(error, result){
          if(!error)
            if(validateEtherAddress(result[0]) && (result[0]!=0x0)){
              $('#addressvalidate').html('<p class="text-success"><strong> Valid address: ' + result[1] +'</strong></p>');
            }
            else {
              $('#addressvalidate').html('<p class="text-danger"><strong> Invalid address </strong></p>');
            }
      });
      }
      else {
        $('#addressvalidate').html('<p class="text-success"><strong> Valid address. </strong></p>');
      }


      }, 900);
      
    }
    

    </script>

  <link rel="apple-touch-icon" sizes="60x60" href="/fav/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/fav/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/fav/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/fav/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/fav/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="/fav/dex32x32.png" sizes="32x32">
  <link rel="manifest" href="/fav/manifest.json">
  <link rel="shortcut icon" href="favicon.ico">
  <meta name="msapplication-TileColor" content="#2e4868">
  <meta name="msapplication-TileImage" content="/fav/mstile-144x144.png">
  <meta name="msapplication-config" content="/fav/browserconfig.xml">
  <meta name="theme-color" content="#2e4868">
</head>

<body>

<header class="container-fluid bg-navy text-white">
<section class="container">
  <a href="https://github.com/Dexaran"><img src="images/etherwallet-logo.png" height="95px" width="auto" alt="DX" /></a>
  <p>Powered by Dexaran</p>
</section>
</header>


<!-- navtabs -->
<section class="container">
  <ul class="nav nav-tabs">
    
    <li>               <a id="send-transaction" class="ptabs" showId="paneSendTrans">     Send Transaction  </a></li> 
    <li class="active"> <a id="name-service" class="ptabs" showId="paneName">                      Name              </a></li>
  </ul>
</section>
<br />
<!-- tab panes -->

<section class="container" style="min-height: 70%">

  <div class="tab-content">

    <div class="tab-pane active" id="paneName">
      <h2> Name Browser </h2>
        <h4> Paste / type lookup Name: </h4>
        <div class="form-group">
            <input type="text" class="form-control" placeholder="Name" id="searchname" onkeyup='onNameKeyUp()'  />
        </div>
        <div class="form-group"><a class="btn btn-primary btn-block" id="dexFuncData" onclick="onNameKeyUp()">Update</a>

          
        <div id="nameOf">
        <div class="form-group">
        <h4> Name owner: </h4>
            <input type="text" class="form-control" placeholder="0x00000" id="ownerOfId" readonly="readonly"/>
          </div>

        <div class="form-group">
        <h4> Name address: </h4>
            <input type="text" class="form-control" placeholder="0x00000" id="addressOfId" readonly="readonly"/>
          </div>
        <div class="form-group">
        <h4> Name value: </h4>
            <input type="text" class="form-control" placeholder="Text..." id="valueOfId" readonly="readonly"/>
          </div>
        <div class="form-group">
        <h4> Name ownership expires on block: </h4>
            <input type="text" class="form-control" placeholder="5900000" id="endblockOfId" readonly="readonly"/>
          </div>
          </div>
        </div>
      </div>









    <!-- send transaction -->
    
    <div class="tab-pane" id="paneSendTrans" style="display: none;">
      <h2> Send Transaction </h2>
      <section class="row" id="walletselection">
        <div class="col-md-4 col-sm-6">
          <h4> How would you like to access your wallet? </h4>
          <div class="radio">
            <label><input type="radio" name="typeOfKeyRadio" value="fileupload">Upload your wallet file (Presale/Geth/etherwallet).</label>
          </div>
          <div class="radio">
            <label><input type="radio" name="typeOfKeyRadio" value="pasteprivkey">Paste / type your private key (Encrypted/Unencrypted).</label>
          </div>
        </div>
        <div class="col-md-4 col-sm-6">


          <div id="selectedUploadKey"  style="display: none;">
            <h4>Select your wallet file : </h4>
            <div class="form-group">
              <p id="file-text"></p>
              <a class="file-input btn btn-block btn-default btn-file marg-v-sm" id="fileUpload">
                SELECT WALLET FILE... <input type="file">
              </a>
              <div id="fuploadStatus"></div>
            </div>
            <div class="form-group" id="walletPasdiv" style="display: none;">
              <p> your file is encrypted with a password, enter the password here: </p>
              <input class="form-control" type="password" placeholder="Password" id="walletfilepassword">
            </div>
          </div>


          <div id="selectedTypeKey"  style="display: none;">
            <h4> Paste / type your private key: </h4>
            <div class="form-group">
              <textarea rows="4" class="form-control" placeholder="Private Key" id="manualprivkey"></textarea>
            </div>
            <div class="form-group" style="display: none;" id="divprikeypassword">
              <p> Your file is encrypted with a password, enter the password here: </p>
              <input class="form-control" type="password" placeholder="Password" id="privkeypassword">
            </div>
          </div>

        </div>
        <div class="col-md-4 col-sm-6" style="display: none;" id="walletuploadbutton">
          <h4 id="uploadbtntxt-wallet" style="display: none;"> Decrypt Wallet:</h4>
          <h4 id="uploadbtntxt-privkey" style="display: none;"> Decrypt Private Key: </h4>
          <div class="form-group"><a class="btn btn-primary btn-block" id="decryptdata">DECRYPT</a></div>
          <div id="decryptStatus"></div>
        </div>
      </section>
      <section class="row" id="wallettransactions" style="display: none;">
        <hr />
        <div class="col-sm-4">
          <h4> Account Information </h4>
          <div>
            <p> Account Address: <br /> <strong id="accountAddress" style="margin-left: 1em"></strong></p>
            <p> Account Balance: <br />
              <strong class="text-success" id="accountBalance" style="margin-left: 1em"> loading... </strong>
              <br />
            </p>
          </div>
          <br />
      <div class="well">
        <p> Dont have a Name? </p>
        <a class="btn btn-primary btn-block" id="btnregistername" onclick="dexRegName()">Register me!</a>
        <div class="text-success text-center marg-v-sm"><strong id="donateThanks" style="display: none;"> What name do you want to own? </strong>
        <input class="form-control" type="text" placeholder="New Name" id="newnameregister"></div>
         <div class="form-group col-xs-12" style="display: none;" id="divregNameCosts">
              <label> It will cost you: </label>
            <textarea class="form-control" rows="1" disabled id="nameregcostETC"> 0 ETC </textarea>
            <textarea class="form-control" rows="1" disabled id="nameregcostGAS"> 210000 GAS</textarea>

          <div id="regnamestatus"></div>
            <a class="btn btn-primary btn-block" data-toggle="modal" onclick="dexRegNameSubmit()">PROCEED</a>
          </div>
      </div>
        </div>
        <div class="col-sm-8">
          <h4>Send Transaction</h4>
          <div class="form-group col-xs-12">
            <label> To: </label>
            <input class="form-control" type="text" placeholder="Address or Name" id="sendtxaddress" onkeyup='onAddressKeyUp()'>
            <div id="addressvalidate"></div>
          </div>
          <div class="form-group col-xs-12">
            <label>
              Amount to Send:
              <br />
            </label>
            <input class="form-control" type="text" placeholder="Amount" id="sendtxamount">
            <div class="radio">
              <label><input type="radio" name="currencyRadio" checked value="ether">Ether</label>
              <div id="weiamount"></div>
            </div>
          </div>
          <div class="form-group col-xs-12">
            <a class="btn btn-info btn-block" id="dex-override-gentx" onclick="dexGenTx()">GENERATE TRANSACTION</a>
          </div>
          <div id="txcreatestatus"></div>
          <div class="form-group col-xs-12" style="display: none;" id="divtransactionTAs">
              <label> Receiver information </label>
            <textarea class="form-control" rows="4" disabled id="tareceiver"></textarea>
              <label> Raw Transaction </label>
            <textarea class="form-control" rows="4" disabled id="tarawtx"></textarea>
              <label> Signed Transaction </label>
            <textarea class="form-control" rows="4" disabled id="tasignedtx"></textarea>
          </div>
          <div id="txsendstatus"></div>
          <div class="form-group col-xs-12" id="divsendtranaction" style="display: none;">
            <a class="btn btn-primary btn-block" data-toggle="modal" onclick="dexSendTx()">SEND TRANSACTION</a>
          </div>

          <div class="modal fade" id="sendTransaction" tabindex="-1" role="dialog" aria-labelledby="sendTransactionLabel">
              <div class="modal-dialog" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h3 class="modal-title" id="myModalLabel"> <strong class="text-danger">Warning!</strong></h3>
                  </div>
                  <div class="modal-body">
                    <h4>
                      You are about to send
                      <strong id="confirmAmount" class="text-primary"> 345 </strong>
                      <strong id="confirmCurrancy" class="text-primary"> Ether </strong>
                      to address
                      <strong id="confirmAddress" class="text-primary"> 928342938472938 </strong>
                    </h4>
                    <h4> Are you <span class="text-underline"> sure </span> you want to do this?</h4>
                  </div>
                  <div class="modal-footer text-center">
                    <button type="button" class="btn btn-default" data-dismiss="modal">No, get me out of here!</button>
                    <button type="button" class="btn btn-primary" id="btnapprovesend">Yes, I am sure! Make transaction.</button>
                  </div>
                </div>
              </div>
          </div>

        </div>
      </section>
    </div> <!-- /send transaction -->







  </div> <!-- /tab panes -->
</section>
</body>
</html>



